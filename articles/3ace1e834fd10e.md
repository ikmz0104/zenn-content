---
title: "認証の王道、Json-Web-Token"
emoji: "🦔"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

こんにちは。みずねこです

以前の社内勉強会で「Json-Web-Tokenって何なの？」という話になったので、その際に理解したことをまとめてみようと思いました。

こちら本日のメイン、コードです：



# おまけ：ハッシュってそもそも何だっけ？
hashについて、今日の大嶋先生の講義の時間でちょっとあやふやだったので、簡単に自分の理解を共有・・
ハッシュとは、ハッシュ関数を用いてあるデータ（キー）をもとに生成されたデータです。
例えばハッシュ関数が入力値を３で割った余りとすると
1 -> 1 % 3 = 1<=これがhash値
2 -> 2 % 3 = 2
3 -> 3 % 3 = 0
4 -> 4 % 3 = 1
のように、１を３で割った余りと４を３で割った余りが同じなので、元の入力値が何なのか、出力からたどることができない（不可逆）
この性質を利用して、入力値を隠したいときに使います。
使い方は、ユーザーが作成したhashとサーバが作成したhashが一致してればOK,など（一致する＝同じ入力をしたとみなす）
一般的に暗号化は復号＝出力から元のデータを割り出すことが可能です。
暗号化の例(ルールとして、アルファベットを１文字ずつずらす、など)
abcde -> bcdef
ルールを知っていれば、bcdef（出力）から入力値(abcde)を割り出すことが可能
ちなみに、↑の１と４のように、ハッシュ値が同じになってしまうことを衝突するといいます。


ハッシュでけっこう大事な話
　・ハッシュの計算にそれなりに時間かかる方が良い
　　⇒総当たり等が出来ない方が良いので。PHPのpassword_hash関数なんかは、たしか十分な回数反復してくれる。
　　　node.jsのbcrypt関数も反復どれぐらいするのかをoptionで指定するようになってる。
　・HMACなどで使うハッシュのシークレットキーは十分な長さが必要




https://zenn.dev/mizuneko4345/scraps/01ce10e7f5c3f6




https://auth0.com/blog/jp-a-look-at-the-latest-draft-for-jwt-bcp/



https://auth0.com/blog/jp-a-look-at-the-latest-draft-for-jwt-bcp/